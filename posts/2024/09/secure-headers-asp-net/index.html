<!doctype html><html lang=en-us><head><title>Securing ASP .NET Core Apps Made Easy // Neil Gandhi</title>
<link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.135.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Neil Gandhi"><meta name=description content><link rel=stylesheet href=/css/main.min.5b1fcc8902588589c4767187402a3c29f8b8d7a6fdef6d9f8f77045bb0d14fee.css><meta name=twitter:card content="summary"><meta name=twitter:title content="Securing ASP .NET Core Apps Made Easy"><meta name=twitter:description content=" Whether you like it or not, there are best practices for security that web applications need to follow. ðŸ‘‹ Today, I want to chat about a nifty little library that can make your ASP.NET Core applications more secure with minimal effort. Say hello to NetEscapades.AspNetCore.SecurityHeaders!
The Problem: Security Headers If youâ€™ve been working with web applications for a while, you know that security is a big deal. One common way to enhance security is by adding security headers to your HTTP responses. These headers can help protect against a variety of attacks, like cross-site scripting (XSS) and clickjacking. However, manually configuring these headers can be a bit of a hassle. You have to remember which headers to add, what values to set, and ensure theyâ€™re applied consistently across your app."><meta property="og:url" content="https://www.realdealneil.com/posts/2024/09/secure-headers-asp-net/"><meta property="og:site_name" content="Neil Gandhi"><meta property="og:title" content="Securing ASP .NET Core Apps Made Easy"><meta property="og:description" content=" Whether you like it or not, there are best practices for security that web applications need to follow. ðŸ‘‹ Today, I want to chat about a nifty little library that can make your ASP.NET Core applications more secure with minimal effort. Say hello to NetEscapades.AspNetCore.SecurityHeaders!
The Problem: Security Headers If youâ€™ve been working with web applications for a while, you know that security is a big deal. One common way to enhance security is by adding security headers to your HTTP responses. These headers can help protect against a variety of attacks, like cross-site scripting (XSS) and clickjacking. However, manually configuring these headers can be a bit of a hassle. You have to remember which headers to add, what values to set, and ensure theyâ€™re applied consistently across your app."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-08T09:32:43-05:00"><meta property="article:modified_time" content="2024-09-08T09:32:43-05:00"><meta property="article:tag" content=".Net"></head><body><header class=app-header><a href=https://www.realdealneil.com/><img class=app-header-avatar src=/avatar-personal.jpg alt="Neil Gandhi"></a>
<span class=app-header-title>Neil Gandhi</span><nav class=app-header-menu><a class=app-header-menu-item href=/>Home</a>
-
<a class=app-header-menu-item href=/tags/>Tags</a>
-
<a class=app-header-menu-item href=/about/>About</a></nav><p>Making software engineering less painful one day at a time</p><div class=app-header-social><a href=https://github.com/therealdealneil target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>Github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://twitter.com/realdealneil target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>Twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg>
</a><a href=https://www.linkedin.com/in/neil-gandhi-920/ target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin"><title>LinkedIn</title><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a><a href=https://www.facebook.com/neil.gandhi target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-facebook"><title>Facebook</title><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/></svg>
</a><a href=https://www.instagram.com/real_deal_neil/ target=_blank rel="noreferrer noopener me"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-instagram"><title>Instagram</title><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>Securing ASP .NET Core Apps Made Easy</h1><div class=post-meta><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Sep 8, 2024</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
3 min read</div><div><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a class=tag href=https://www.realdealneil.com/tags/.net/>.Net</a></div></div></header><div class=post-content><p><img src=/posts/2024/09/secure-headers-asp-net/hacker_hu16312857404512943086.png alt="Hacker Acting Maliciously" loading=lazy></p><p>Whether you like it or not, there are best practices for security that web applications need to follow. ðŸ‘‹ Today, I want to chat about a nifty little library that can make your ASP.NET Core applications more secure with minimal effort. Say hello to <strong><a href=https://github.com/andrewlock/NetEscapades.AspNetCore.SecurityHeaders>NetEscapades.AspNetCore.SecurityHeaders</a></strong>!</p><h3 id=the-problem-security-headers>The Problem: Security Headers</h3><p>If you&rsquo;ve been working with web applications for a while, you know that security is a big deal. One common way to enhance security is by adding security headers to your HTTP responses. These headers can help protect against a variety of attacks, like cross-site scripting (XSS) and clickjacking. However, manually configuring these headers can be a bit of a hassle. You have to remember which headers to add, what values to set, and ensure they&rsquo;re applied consistently across your app.</p><h3 id=the-solution-netescapadesaspnetcoresecurityheaders>The Solution: NetEscapades.AspNetCore.SecurityHeaders</h3><p>This is where <strong><a href=https://github.com/andrewlock/NetEscapades.AspNetCore.SecurityHeaders>NetEscapades.AspNetCore.SecurityHeaders</a></strong> comes in. This library, created by <a href=https://andrewlock.net/adding-default-security-headers-in-asp-net-core/>Andrew Lock</a>, encapsulates all the common security headers into an easy-to-use package. It takes care of the heavy lifting for you, so you can focus on building features instead of worrying about security configurations.</p><h3 id=alternative-option>Alternative Option</h3><p>While this library will make your life much easier, there&rsquo;s an even easier way to handle this. When running multiple applications, you&rsquo;ll need to add this library into each and every one. <a href=https://scotthelme.co.uk/hardening-your-http-response-headers/>A better approach</a> is to add these headers centrally at your web server, load balancer or other edge reverse proxy. This lets you add it once and not have to worry about it for every single application. This approach is out-of-scope for this post, but give it strong consideration. Unfortunately, there may be situations where you&rsquo;re limited and must make changes within your application layer.</p><h3 id=getting-started>Getting Started</h3><p>First things first, you need to install the package. You can do this via the NuGet Package Manager Console:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>PM&gt; Install-Package NetEscapades.AspNetCore.SecurityHeaders
</span></span></code></pre></div><p>Or, if you prefer the .NET CLI:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dotnet add package NetEscapades.AspNetCore.SecurityHeaders
</span></span></code></pre></div><h3 id=adding-security-headers>Adding Security Headers</h3><p>Once you&rsquo;ve got the package installed, adding security headers to your app is a breeze. Just add the middleware to your <code>Startup.cs</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Configure(IApplicationBuilder app)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    app.UseSecurityHeaders();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Boom! Just like that, your app now includes a set of default security headers. These headers include:</p><ul><li><strong>X-Content-Type-Options: nosniff</strong></li><li><strong>Strict-Transport-Security: max-age=31536000; includeSubDomains</strong></li><li><strong>X-Frame-Options: Deny</strong></li><li><strong>X-XSS-Protection: 1; mode=block</strong></li><li><strong>Referrer-Policy: strict-origin-when-cross-origin</strong></li><li><strong>Content-Security-Policy: object-src &rsquo;none&rsquo;; form-action &lsquo;self&rsquo;; frame-ancestors &rsquo;none&rsquo;</strong></li></ul><h3 id=customizing-headers>Customizing Headers</h3><p>Of course, you might want to customize these headers to fit your specific needs. No problem! You can create a <code>HeaderPolicyCollection</code> and add your own policies:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Configure(IApplicationBuilder app)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> policyCollection = <span style=color:#66d9ef>new</span> HeaderPolicyCollection()
</span></span><span style=display:flex><span>        .AddFrameOptionsDeny()
</span></span><span style=display:flex><span>        .AddXssProtectionBlock()
</span></span><span style=display:flex><span>        .AddContentTypeOptionsNoSniff()
</span></span><span style=display:flex><span>        .AddStrictTransportSecurityMaxAgeIncludeSubDomains(maxAgeInSeconds: <span style=color:#ae81ff>60</span> * <span style=color:#ae81ff>60</span> * <span style=color:#ae81ff>24</span> * <span style=color:#ae81ff>365</span>)
</span></span><span style=display:flex><span>        .AddReferrerPolicyStrictOriginWhenCrossOrigin()
</span></span><span style=display:flex><span>        .RemoveServerHeader()
</span></span><span style=display:flex><span>        .AddContentSecurityPolicy(builder =&gt;
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            builder.AddObjectSrc().None();
</span></span><span style=display:flex><span>            builder.AddFormAction().Self();
</span></span><span style=display:flex><span>            builder.AddFrameAncestors().None();
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    app.UseSecurityHeaders(policyCollection);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=why-use-this-library>Why Use This Library?</h3><p>So, why should you use <strong>NetEscapades.AspNetCore.SecurityHeaders</strong>? Here are a few reasons:</p><ol><li><strong>Simplicity</strong>: It abstracts away the complexity of configuring security headers.</li><li><strong>Consistency</strong>: Ensures that security headers are applied uniformly across your app.</li><li><strong>Customization</strong>: Allows you to easily tweak the headers to meet your specific requirements.</li></ol><p>In short, this library is a great way to enhance the security of your ASP.NET Core applications without getting bogged down in the details. Give it a try and see how it can simplify your security setup!</p><p>Happy coding! ðŸš€</p></div><div class=post-footer></div></article></main></body></html>